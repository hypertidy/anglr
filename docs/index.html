<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Tidy Flexible Spatial &bull; rangl</title><!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <div class="container">
      <header><div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">rangl</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<p><a href="https://travis-ci.org/r-gris/rangl"><img src="https://travis-ci.org/r-gris/rangl.svg?branch=master" alt="Travis-CI Build Status"></a> <a href="https://ci.appveyor.com/project/r-gris/rangl"><img src="https://ci.appveyor.com/api/projects/status/github/r-gris/rangl?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a> <a href="https://codecov.io/github/r-gris/rangl?branch=master"><img src="https://img.shields.io/codecov/c/github/r-gris/rangl/master.svg" alt="Coverage Status"></a></p>
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="tabular-storage-for-spatial-data" class="section level2">
<h2>Tabular storage for spatial data</h2>
<p>The &lsquo;rangl&rsquo; package illustrates some generalizations of GIS-y tasks in R with &ldquo;tables&rdquo;.</p>
<p>The basic idea is to create &ldquo;toplogical&rdquo; objects from a variety of sources including:</p>
<ul><li>SpatialPolygons, SpatialLines, SpatialMultipoints</li>
<li>rgl 3D objects</li>
<li>trip objects (animal tracking data) and other related &ldquo;trajectory&rdquo; data</li>
<li>model structures for spatially explicit ecosystem models &ndash;others to come&ndash; see <a href="https://github.com/mdsumner/spbabel" class="uri">https://github.com/mdsumner/spbabel</a></li>
</ul><p>The topology comes from two related aspects. The first is decomposing what are usually <em>paths of coordinates</em> defining lines or polygons into the more general topological primitives. The second is a de-duplication of shared vertices into a single <strong>vertex pool</strong> that is referenced by primitives. This is not what is always meant when people say &ldquo;topology&rdquo; in a GIS context, but the topic is too complex and fragmented to summarize in brief here.</p>
<p>Multiple multi-part objects are decomposed to a set of related, linked tables. Object identity is maintained with attribute metadata and this is carried through to colour and other aesthetics in plots. The nice thing is that the structures used for general visualization correspond to handy structures for a lot of modelling and analyses. It also happens that the easiest way to prove that it works is to plot it, so it&rsquo;s a good place to start, &ldquo;eye-candy&rdquo; snubs aside.</p>
<p>There is plenty of evidence around for the need for this kind of approach to data structures, we can see it in PostGIS Topology when simple features is not enough, in geometry generators for QGIS, in coordinate space munching by ggplot2, and in the wonderful discussions of topology and projections by Mike Bostock.</p>
<p>Plot methods take those tables and generate the &ldquo;indexed array&rdquo; structures needed for &lsquo;rgl&rsquo;. The tables use globally unique IDs to ensure that we can subset and recombine data sets arbitrarily without constantly updating structural indexes. The tables can also be back-ended by whatever database engine is appropriate, so we can leverage that power as we like without having to push through shoe-horn ourselves through someone&rsquo;s definition of how spatial data is supposed to be stored. Analytical methods can either use the graphics structure index model or the relational table model. In this way we get the best of both worlds of &ldquo;GIS&rdquo; and &ldquo;3D models&rdquo;.</p>
</div>
<div id="ongoing-design" class="section level2">
<h2>Ongoing design</h2>
<p>The core work for translating &ldquo;Spatial&rdquo; classes is done by the unspecialized &lsquo;spbabel::map_table&rsquo; function.</p>
<p>This is likely to be replaced by a &lsquo;primitives()&rsquo; function that takes any lines or polygons data and returns just the linked edges. Crucially, polygons and lines are described by the same 1D primitives, and this is easy to do. Harder is to generate 2D primitives and for that we rely on <a href="https://www.cs.cmu.edu/~quake/triangle.html">Jonathan Richard Shewchuk&rsquo;s Triangle</a>.</p>
<p>Triangulation is with <code>RTriangle</code> package using &ldquo;constrained mostly-Delaunay Triangulation&rdquo; from the Triangle library, but could alternatively use <code>rgl</code> with its ear clipping algorithm.</p>
<p>(With RTriangle we can set a max area for the triangles, so it can wrap around curves like globes and hills.)</p>
</div>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p>This package is in active development and will see a number of breaking changes before release.</p>
<p>Also required are packages &lsquo;rgl&rsquo; and &lsquo;RTriangle&rsquo;, so first make sure you can install and use these.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"rgl"</span>)
<span class="kw">install.packages</span>(<span class="st">"RTriangle"</span>)</code></pre></div>
<p>In examples below I use &lsquo;graticule&rsquo;, &lsquo;trip&rsquo;, and &lsquo;rbgm&rsquo;, but these aren&rsquo;t strictly required by the package, only for some examples.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"graticule"</span>)
<span class="kw">install.packages</span>(<span class="st">"trip"</span>)
<span class="kw">install.packages</span>(<span class="st">"rbgm"</span>)</code></pre></div>
<p>If you are feeling adventurous, &lsquo;rangl&rsquo; can be installed from Github.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">"r-gris/rangl"</span>)</code></pre></div>
</div>
<div id="get-involved" class="section level2">
<h2>Get involved!</h2>
<p>Let me know if you have problems, or are interested in this work. See the issues tab to make suggestions or report bugs.</p>
<p><a href="https://github.com/r-gris/rangl/issues" class="uri">https://github.com/r-gris/rangl/issues</a></p>
</div>
<div id="examples" class="section level2">
<h2>Examples</h2>
<p>See the [package vignettes].</p>
</div>
<div id="open-topics" class="section level2">
<h2>Open topics</h2>
<ul><li>single-points are a bit funny, it&rsquo;s wasteful to copy the branches model - needs thought</li>
<li>multi-points are also a bit funny, but this will form the basis of input tracking data for some applications</li>
<li>UUIDs- unique IDs are not done very well, they are maybe &hellip; 1) not unique enough, 2) over-used for vertices/branches, 3) unnecessary for general storage, maybe we should always flip back to structural <em>after</em> merge/transmission operations.</li>
</ul><p>Please note that this project is released with a <a href="CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs">
      </div>

</div>


      <footer><p>Built by <a href="http://hadley.github.io/pkgdown/">pkgdown</a>. Styled with <a href="http://getbootstrap.com">Bootstrap 3</a>.</p>
      </footer></div>

  </body></html>
